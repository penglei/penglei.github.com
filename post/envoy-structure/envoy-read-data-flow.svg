<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="540px" preserveAspectRatio="none" style="width:828px;height:540px;" version="1.1" viewBox="0 0 828 540" width="828px" zoomAndPan="magnify"><defs><filter height="300%" id="fkhbepv1o3wyy" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="401.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173.5" y="117.7988"/><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="321.5" y="231.7305"/><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="201.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="468.5" y="317.3516"/><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="748.5" y="473.9043"/><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="136.5527" style="stroke: #000000; stroke-width: 2.0;" width="435" x="382" y="374.6621"/><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="46.6211" style="stroke: #000000; stroke-width: 2.0;" width="415" x="392" y="398.9727"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="56" x2="56" y1="86.4883" y2="528.2148"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="178" x2="178" y1="86.4883" y2="528.2148"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="326" x2="326" y1="86.4883" y2="528.2148"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="473" x2="473" y1="86.4883" y2="528.2148"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="753" x2="753" y1="86.4883" y2="528.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="8" y="83.5352">FileEventImpl</text><ellipse cx="56.5" cy="13" fill="#FEFECE" filter="url(#fkhbepv1o3wyy)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M56.5,21 L56.5,48 M43.5,29 L69.5,29 M56.5,48 L43.5,63 M56.5,48 L69.5,63 " fill="none" filter="url(#fkhbepv1o3wyy)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#fkhbepv1o3wyy)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="123" x="115" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="109" x="122" y="71.5352">ConnectionImpl</text><rect fill="#FEFECE" filter="url(#fkhbepv1o3wyy)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="261" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="268" y="71.5352">TransportSocket</text><rect fill="#FEFECE" filter="url(#fkhbepv1o3wyy)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="139" x="402" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="409" y="71.5352">FilterManagerImpl</text><rect fill="#FEFECE" filter="url(#fkhbepv1o3wyy)" height="30.4883" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="710" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="717" y="71.5352">ReadFilter</text><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="401.416" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="173.5" y="117.7988"/><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="321.5" y="231.7305"/><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="201.8633" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="468.5" y="317.3516"/><rect fill="#FFFFFF" filter="url(#fkhbepv1o3wyy)" height="29.3105" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="748.5" y="473.9043"/><polygon fill="#A80036" points="161.5,113.7988,171.5,117.7988,161.5,121.7988,165.5,117.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="56.5" x2="167.5" y1="117.7988" y2="117.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="63.5" y="113.0566">callback</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="225.5" y1="147.1094" y2="147.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="225.5" x2="225.5" y1="147.1094" y2="160.1094"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="184.5" x2="225.5" y1="160.1094" y2="160.1094"/><polygon fill="#A80036" points="194.5,156.1094,184.5,160.1094,194.5,164.1094,190.5,160.1094" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="190.5" y="142.3672">onFileEvent(events)</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="225.5" y1="189.4199" y2="189.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="225.5" x2="225.5" y1="189.4199" y2="202.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="184.5" x2="225.5" y1="202.4199" y2="202.4199"/><polygon fill="#A80036" points="194.5,198.4199,184.5,202.4199,194.5,206.4199,190.5,202.4199" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="190.5" y="184.6777">onReadReady</text><polygon fill="#A80036" points="309.5,227.7305,319.5,231.7305,309.5,235.7305,313.5,231.7305" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="315.5" y1="231.7305" y2="231.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="190.5" y="226.9883">doRead</text><polygon fill="#A80036" points="194.5,257.041,184.5,261.041,194.5,265.041,190.5,261.041" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="188.5" x2="325.5" y1="261.041" y2="261.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="27" x="200.5" y="256.2988">data</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="225.5" y1="290.3516" y2="290.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="225.5" x2="225.5" y1="290.3516" y2="303.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="184.5" x2="225.5" y1="303.3516" y2="303.3516"/><polygon fill="#A80036" points="194.5,299.3516,184.5,303.3516,194.5,307.3516,190.5,303.3516" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="124" x="190.5" y="285.6094">onRead(buffer_size)</text><polygon fill="#A80036" points="456.5,313.3516,466.5,317.3516,456.5,321.3516,460.5,317.3516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="183.5" x2="462.5" y1="317.3516" y2="317.3516"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="478.5" x2="520.5" y1="346.6621" y2="346.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="520.5" x2="520.5" y1="346.6621" y2="359.6621"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="479.5" x2="520.5" y1="359.6621" y2="359.6621"/><polygon fill="#A80036" points="489.5,355.6621,479.5,359.6621,489.5,363.6621,485.5,359.6621" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="256" x="485.5" y="341.9199">onContinueReading(filter, buffer_source)</text><path d="M382,374.6621 L456,374.6621 L456,381.6621 L446,391.6621 L382,391.6621 L382,374.6621 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="136.5527" style="stroke: #000000; stroke-width: 2.0;" width="435" x="382" y="374.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="397" y="388.2305">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="289" x="471" y="387.2969">[filters: ActiveReadFilter &amp;&amp; status ne StopIteration]</text><path d="M392,398.9727 L454,398.9727 L454,405.9727 L444,415.9727 L392,415.9727 L392,398.9727 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.6211" style="stroke: #000000; stroke-width: 2.0;" width="415" x="392" y="398.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="17" x="407" y="412.541">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="469" y="411.6074">[filter has initialized]</text><polygon fill="#A80036" points="741.5,433.5938,751.5,437.5938,741.5,441.5938,745.5,437.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="478.5" x2="747.5" y1="437.5938" y2="437.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="485.5" y="432.8516">onNewConnection()</text><polygon fill="#A80036" points="736.5,469.9043,746.5,473.9043,736.5,477.9043,740.5,473.9043" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="478.5" x2="742.5" y1="473.9043" y2="473.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="485.5" y="469.1621">onData(buffer, end_stream: bool)</text><polygon fill="#A80036" points="489.5,499.2148,479.5,503.2148,489.5,507.2148,485.5,503.2148" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="483.5" x2="752.5" y1="503.2148" y2="503.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="39" x="495.5" y="498.4727">status</text><!--MD5=[a3e74b325f366bfe87a3a445aa1f300f]
@startuml
hide footbox

actor FileEventImpl
FileEventImpl -> ConnectionImpl: callback

activate ConnectionImpl
ConnectionImpl -> ConnectionImpl: onFileEvent(events)
ConnectionImpl -> ConnectionImpl: onReadReady
ConnectionImpl -> TransportSocket: doRead
activate TransportSocket
return data

ConnectionImpl -> ConnectionImpl: onRead(buffer_size)
ConnectionImpl -> FilterManagerImpl
activate FilterManagerImpl
  FilterManagerImpl -> FilterManagerImpl: onContinueReading(filter, buffer_source)
  loop filters: ActiveReadFilter && status ne StopIteration
    alt filter has initialized
      FilterManagerImpl -> ReadFilter: onNewConnection()
    end

    FilterManagerImpl -> ReadFilter: onData(buffer, end_stream: bool)
    activate ReadFilter
    return status
  end
@enduml

PlantUML version 1.2020.05(Fri Mar 20 05:17:32 CST 2020)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 13+33
Operating System: Mac OS X
Default Encoding: UTF-8
Language: zh
Country: CN
--></g></svg>